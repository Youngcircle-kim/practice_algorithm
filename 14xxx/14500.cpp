#include <bits/stdc++.h>
using namespace std;
int N, M;
const int p[19][3][2] = {
    // 좌우반전과 회전만 고려하여 Shape 만듦. 평행이동은 신경 안쓴다.
    // (y, x)
    // 일자 테트로미노 가능한 shape(2개)
    {{0, 1}, {0, 2}, {0, 3}},
    {{1, 0}, {2, 0}, {3, 0}},
    // 정사각형 테트로미노(1개)
    {{1, 0}, {0, 1}, {1, 1}},
    // L자 테트로미노(8개)
    {{0, 1}, {-1, 1}, {-2, 1}},
    {{-1, 0}, {-2, 0}, {0, 1}},
    {{-1, 0}, {0, 1}, {0, 2}},
    {{0, 1}, {0, 2}, {1, 2}},
    {{-1, 0}, {-2, 0}, {-2, 1}},
    {{-1, 0}, {-2, 0}, {-2, -1}},
    {{0, 1}, {0, 2}, {-1, 2}},
    {{1, 0}, {0, 1}, {0, 2}},
    // T자 테트리미노(4개)
    {{0, -1}, {0, 1}, {-1, 0}},
    {{1, 0}, {-1, 0}, {0, 1}},
    {{0, -1}, {0, 1}, {1, 0}},
    {{-1, 0}, {1, 0}, {0, -1}},
    // Z자 테트리미노(4개)
    {{-1, 0}, {-1, 1}, {-2, 1}},
    {{1, 0}, {1, 1}, {2, 1}},
    {{0, 1}, {1, 1}, {1, 2}},
    {{0, 1}, {-1, 1}, {-1, 2}},
};
int main()
{
    cin.tie(0);
    cin >> N >> M;
    int arr[N][M];
    for (int i = 0; i < N; i++)
    {
        for (int j = 0; j < M; j++)
        {
            cin >> arr[i][j];
        }
    }
    int max = 0;
    for (int i = 0; i < N; i++)
    {
        for (int j = 0; j < M; j++)
        {
            for (int t = 0; t < 19; t++)
            {
                if (
                    i + p[t][0][0] < 0 ||
                    i + p[t][1][0] < 0 ||
                    i + p[t][2][0] < 0 ||
                    i + p[t][0][0] >= N ||
                    i + p[t][1][0] >= N ||
                    i + p[t][2][0] >= N)
                {
                    continue;
                }
                if (
                    j + p[t][0][1] < 0 || j + p[t][0][1] >= M ||
                    j + p[t][1][1] < 0 || j + p[t][1][1] >= M ||
                    j + p[t][2][1] < 0 || j + p[t][2][1] >= M)
                {
                    continue;
                }
                int sum = arr[i][j] + arr[i + p[t][0][0]][j + p[t][0][1]] + arr[i + p[t][1][0]][j + p[t][1][1]] + arr[i + p[t][2][0]][j + p[t][2][1]];
                if (max < sum)
                {
                    max = sum;
                }
            }
        }
    }
    cout << max;
}